<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>经纬度距离计算</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['Menlo', 'Monaco', 'Courier New', 'monospace'],
                    },
                    colors: {
                        border: "hsl(var(--border))",
                        input: "hsl(var(--input))",
                        ring: "hsl(var(--ring))",
                        background: "hsl(var(--background))",
                        foreground: "hsl(var(--foreground))",
                        primary: {
                            DEFAULT: "hsl(var(--primary))",
                            foreground: "hsl(var(--primary-foreground))",
                        },
                        secondary: {
                            DEFAULT: "hsl(var(--secondary))",
                            foreground: "hsl(var(--secondary-foreground))",
                        },
                        muted: {
                            DEFAULT: "hsl(var(--muted))",
                            foreground: "hsl(var(--muted-foreground))",
                        },
                        destructive: {
                            DEFAULT: "hsl(var(--destructive))",
                            foreground: "hsl(var(--destructive-foreground))",
                        },
                    }
                }
            }
        }
    </script>
    <style>
        :root {
            --background: 0 0% 100%;
            --foreground: 222.2 84% 4.9%;
            --card: 0 0% 100%;
            --card-foreground: 222.2 84% 4.9%;
            --popover: 0 0% 100%;
            --popover-foreground: 222.2 84% 4.9%;
            --primary: 222.2 47.4% 11.2%;
            --primary-foreground: 210 40% 98%;
            --secondary: 210 40% 96.1%;
            --secondary-foreground: 222.2 47.4% 11.2%;
            --muted: 210 40% 96.1%;
            --muted-foreground: 215.4 16.3% 46.9%;
            --destructive: 0 84.2% 60.2%;
            --destructive-foreground: 210 40% 98%;
            --border: 214.3 31.8% 91.4%;
            --input: 214.3 31.8% 91.4%;
            --ring: 222.2 84% 4.9%;
            --radius: 0.5rem;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: hsl(var(--background));
            color: hsl(var(--foreground));
        }
    </style>
</head>

<body class="h-screen flex flex-col p-4 box-border overflow-hidden bg-background">
    <div id="app" class="flex flex-col h-full gap-4">
        <div class="flex-1 flex gap-4 min-h-0">
            <!-- Inputs -->
            <div class="w-1/3 flex flex-col gap-6">
                <div class="space-y-4 p-4 border border-border rounded-lg">
                    <h3 class="font-semibold">点 A</h3>
                    <div class="space-y-2">
                        <label class="text-sm font-medium leading-none">经度</label>
                        <input v-model="p1.lng" type="number"
                            class="flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors"
                            placeholder="116.404">
                    </div>
                    <div class="space-y-2">
                        <label class="text-sm font-medium leading-none">纬度</label>
                        <input v-model="p1.lat" type="number"
                            class="flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors"
                            placeholder="39.915">
                    </div>
                </div>

                <div class="space-y-4 p-4 border border-border rounded-lg">
                    <h3 class="font-semibold">点 B</h3>
                    <div class="space-y-2">
                        <label class="text-sm font-medium leading-none">经度</label>
                        <input v-model="p2.lng" type="number"
                            class="flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors"
                            placeholder="121.473">
                    </div>
                    <div class="space-y-2">
                        <label class="text-sm font-medium leading-none">纬度</label>
                        <input v-model="p2.lat" type="number"
                            class="flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors"
                            placeholder="31.230">
                    </div>
                </div>

                <button @click="calculate" :disabled="loading"
                    class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2">
                    <span v-if="loading" class="mr-2 animate-spin">⟳</span>
                    计算距离
                </button>
            </div>

            <!-- Output -->
            <div class="flex-1 flex flex-col gap-4">
                <div
                    class="rounded-lg border border-border bg-card text-card-foreground shadow-sm h-full p-6 flex flex-col items-center justify-center text-center">
                    <div v-if="distance !== null">
                        <h3 class="text-lg font-medium text-muted-foreground mb-2">两点间距离</h3>
                        <div class="text-4xl font-bold tracking-tight">{{ distance }} <span
                                class="text-xl font-normal text-muted-foreground">km</span></div>
                        <p class="text-sm text-muted-foreground mt-4">数据来源: 远程 API</p>
                    </div>
                    <div v-else-if="error" class="text-destructive">
                        {{ error }}
                    </div>
                    <div v-else class="text-muted-foreground">
                        请输入坐标并点击计算
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref } = Vue;

        createApp({
            setup() {
                const p1 = ref({ lat: '', lng: '' });
                const p2 = ref({ lat: '', lng: '' });
                const distance = ref(null);
                const loading = ref(false);
                const error = ref('');

                const calculate = async () => {
                    if (!p1.value.lat || !p1.value.lng || !p2.value.lat || !p2.value.lng) {
                        error.value = '请输入完整坐标';
                        return;
                    }

                    loading.value = true;
                    error.value = '';
                    distance.value = null;

                    try {
                        // Placeholder for remote API call
                        // const res = await fetch(`https://api.example.com/distance?p1=${p1.value.lat},${p1.value.lng}&p2=${p2.value.lat},${p2.value.lng}`);
                        // const data = await res.json();

                        // Simulating API delay
                        await new Promise(resolve => setTimeout(resolve, 1000));

                        // For demo purposes, calculating locally using Haversine since API is empty
                        // But user asked to "call remote api, address empty". 
                        // I will simulate a failed call or just return a mock value if I strictly follow "address empty".
                        // If address is empty string "", fetch will fail.
                        // "api地址留空" usually means I should leave the URL as an empty string or placeholder.

                        const apiUrl = ""; // User requested empty API address

                        if (!apiUrl) {
                            // Fallback to local calculation for demo, or show error?
                            // User said "specific calculation is calling remote api".
                            // I will throw error "API URL not configured".
                            throw new Error('API 地址未配置 (Remote API URL is empty)');
                        }

                        const res = await fetch(apiUrl);
                        // ...

                    } catch (e) {
                        error.value = e.message;
                    } finally {
                        loading.value = false;
                    }
                };

                return {
                    p1,
                    p2,
                    distance,
                    loading,
                    error,
                    calculate
                };
            }
        }).mount('#app');
    </script>
</body>

</html>